<div class="uk-width-1-1@l" id="feesStructure">
	<div class="uk-card uk-card-default uk-card-small uk-card-hover">
		<div class="uk-card-header">
			<div class="uk-grid uk-grid-small">
				<div class="uk-width-auto"><h4>Fee Structure</h4></div>
				<div class="uk-width-expand uk-text-right panel-icons">
					<a
						href="#"
						class="uk-icon-link sortable-icon btn btn-outline-primary"
						title="Move"
						data-uk-tooltip
					>
						<span data-uk-icon="icon: move" class="uk-text-success"></span>
					</a>

					<% if (userType === "Admin") { %>

					<a
						href="#"
						class="btn btn-outline-primary"
						title="Add Fees Structure"
						data-uk-tooltip
						data-bs-toggle="modal"
						data-bs-target="#addFeesStructureModal"
						><span data-uk-icon="icon: plus" class="uk-text-success"></span
					></a>

					<% } %>
					<a
						href="#"
						class="uk-icon-link sortable-icon btn btn-outline-primary"
						title="Close"
						data-uk-tooltip
					>
						<span data-uk-icon="icon: close" class="uk-text-success"></span>
					</a>
				</div>
			</div>
		</div>
		<div class="uk-card-body">
			<div class="">
				<div class="uk-child-width-1-3@m uk-grid-small uk-grid-match" uk-grid>
					<!-- The Unit List -->
					<% feesStructures.forEach(table=>{ %>
					<div class="nature-card">
						<div class="uk-card uk-card-small uk-card-default my-3 shadow">
							<div class="uk-card-header">
								<div class="uk-grid uk-grid-small uk-text-small" data-uk-grid>
									<div class="uk-width-expand" title="Class" data-uk-tooltip>
										<span class="cat-txt">
											<span
												data-uk-tooltip="title: Status: Active "
												class="uk-text-success"
											>
												ðŸŸ¢
											</span>
											Fees Structure
										</span>
									</div>
								</div>
							</div>
							<div class="uk-card-media"></div>

							<div class="uk-card-body">
								<h6
									class="uk-margin-small-bottom uk-margin-remove-adjacent uk-text-bold"
								>
									<%= table.title %>
								</h6>
								<p class="uk-text-small uk-text-muted">
									<%= table.description %>
								</p>
								<p class="uk-text-small uk-text-muted" title="Updated">
									Updated : <%= formatDate(table.createdAt) %>
								</p>
							</div>
							<div class="uk-card-footer">
								<div
									class="uk-grid uk-grid-small uk-grid-divider uk-flex uk-flex-middle"
									data-uk-grid
								>
									<div class="uk-width-auto">
										<img
											class="uk-border-circle"
											alt=""
											width="40"
											height="40"
											src="\img\WesterLogo.jpg"
										/>
									</div>
									<div
										class="uk-width-expand uk-text-small"
										title="Admin"
										data-uk-tooltip
									>
										<span class="fw-bold">Admin: </span>
										<%= table.creator %>
									</div>

									<div class="uk-width-auto uk-text-right">
										<a
											data-uk-tooltip="title: Download Fee Structure"
											href="/fees/download/<%= table._id %>"
											target="_blank"
											class="uk-icon-link uk-text-primary"
											data-uk-icon="icon:download; ratio: 1.5"
										></a>
									</div>
									<% if (userType === "Admin") { %>

									<div class="uk-width-auto uk-text-right">
										<a
											data-uk-tooltip="title: Delete Fee Structure"
											href="/fees/delete/<%= table._id %>"
											class="uk-icon-link uk-text-danger"
											data-uk-icon="icon:trash; ratio: 1.2"
										></a>
									</div>
									<% } %>
								</div>
							</div>
						</div>
					</div>
					<%}) %>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Modal -->
<div
	class="modal fade"
	id="addFeesStructureModal"
	tabindex="-1"
	role="dialog"
	aria-labelledby="modalTitleId"
	aria-hidden="true"
>
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<form action="/fees/upload" enctype="multipart/form-data" method="post">
				<div class="modal-header">
					<h5 class="modal-title" id="modalTitleId">Post Fees Structure</h5>
					<button
						type="button"
						class="btn-close"
						data-bs-dismiss="modal"
						aria-label="Close"
					></button>
				</div>
				<div class="modal-body">
					<div class="container-fluid">
						<div class="mb-3">
							<label for="timetable" class="form-label"> Choose a File </label>
							<input
								class="form-control"
								type="file"
								id="feesStructure"
								name="feesStructure"
								required
							/>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button
						type="button"
						class="btn btn-secondary"
						data-bs-dismiss="modal"
					>
						Close
					</button>
					<button type="submit" class="btn btn-primary">Upload</button>
				</div>
			</form>
		</div>
	</div>
</div>

<script>
	var addFeesStructureModal = document.getElementById("addFeesStructureModal");

	addFeesStructureModal.addEventListener("show.bs.modal", function (event) {
		// Button that triggered the modal
		let button = event.relatedTarget;
		// Extract info from data-bs-* attributes
		let recipient = button.getAttribute("data-bs-whatever");

		// Use above variables to manipulate the DOM
	});
</script>
